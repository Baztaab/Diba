# JHora D7 Parity Rule (Diagnosis)

compat preset: `jhora_us`

case: 1997-06-07 20:28:36 Tehran (IR)

ayanamsa: 23-48-19.87 (23.8055194444)

D7 method: 2 (Parasara even backward)

### Terminology: "even_signs" (PyJHora meaning)

In this document, `even_signs` follows PyJHora’s convention:
- `even_signs = {Taurus, Cancer, Virgo, Scorpio, Capricorn, Pisces}`
- i.e. `sign_num ∈ {1, 3, 5, 7, 9, 11}` (0=Aries, 1=Taurus, ...)

This is **not** "numeric parity of sign_num". It is the specific PyJHora set used across chart rules.

## Diagnostic table (D7 method2)

| point | d1_sign_num | d1_even | method2_branch | seg | L | d_long_raw | d_long_mirror | jhora_deg | closer | should_mirror |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ascendant | 7 | True | True | 6 | 26.404377 | 4.830636 | 25.169364 | 25.169369 | mirror | True |
| sun | 1 | True | True | 5 | 23.132454 | 11.927176 | 18.072824 | 18.072828 | mirror | True |
| moon | 2 | False | False | 5 | 21.650757 | 1.555298 | 28.444702 | 1.555297 | raw | False |
| mars | 5 | True | True | 0 | 1.471278 | 10.298944 | 19.701056 | 19.701061 | mirror | True |
| mercury | 1 | True | True | 0 | 3.954168 | 27.679174 | 2.320826 | 2.320831 | mirror | True |
| jupiter | 9 | True | True | 6 | 28.127085 | 16.889595 | 13.110405 | 13.110408 | mirror | True |
| venus | 2 | False | False | 2 | 10.470924 | 13.296467 | 16.703533 | 13.296464 | raw | False |
| saturn | 11 | True | True | 5 | 24.109633 | 18.767432 | 11.232568 | 11.232572 | mirror | True |
| rahu | 5 | True | True | 0 | 0.900857 | 6.306001 | 23.693999 | 23.694006 | mirror | True |
| ketu | 11 | True | True | 0 | 0.900857 | 6.306001 | 23.693999 | 23.694006 | mirror | True |

## Criterion fit

- `should_mirror == method2_branch_used` → **True**
- `should_mirror == D1_is_even_sign` → **True**
- `should_mirror == seg_parity` → False
- `should_mirror == sign_num_parity` → True (same as even-sign list)

## Conclusion (rule)

For `jhora_us` compat only, D7 method2 requires mirroring `d_long` **iff** the D1 rasi sign is even (PyJHora even_signs = {1,3,5,7,9,11}).

Scope: **only D7/method2** in compat mode. PyJHora mode is unaffected.

## Decision dump (1997-06-07 20:28:36 Tehran)

vedic_compat_mode = "jhora_us"

D7 method = 2

معیار mirror: mirror = (D1 rasi_sign is even)

ascendant: d1_sign_num=7, mirror_applied=true
sun: d1_sign_num=1, mirror_applied=true
moon: d1_sign_num=2, mirror_applied=false
mars: d1_sign_num=5, mirror_applied=true
mercury: d1_sign_num=1, mirror_applied=true
jupiter: d1_sign_num=9, mirror_applied=true
venus: d1_sign_num=2, mirror_applied=false
saturn: d1_sign_num=11, mirror_applied=true
rahu: d1_sign_num=5, mirror_applied=true
ketu: d1_sign_num=11, mirror_applied=true

یادآوری: mirror فقط در D7/method2 و فقط وقتی vedic_compat_mode="jhora_us" فعال است (طبق guard testها).

---

## Reproduce (test reference)

Generated by:
- `tests/test_vedic_vargas_parity_jhora.py::test_jhora_parity_d7_case_1997`

Run:
- `pytest -k "jhora_parity_d7_case_1997" -q`
